<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="小可乐跟我走"><title>React Native 动画 · Code & Life</title><meta name="description" content="本次只记录用到的 API。
timing( )图片由小变大
1234567891011121314151617181920212223242526272829&amp;#x2F;&amp;#x2F; jsthis.state &amp;#x3D; &amp;#123;      hair1AnimateOpacity: new A"><meta name="keywords" content="博客,小可乐跟我走"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><script src="/js/jquery.js"></script><meta name="generator" content="Hexo 5.2.0"></head><body><div class="sidebar animated fadeInDown"><div class="catalog"><h1>目录</h1><div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#timing"><span class="toc-text">timing( )</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#spring%EF%BC%88%EF%BC%89"><span class="toc-text">spring（）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sequence"><span class="toc-text">sequence()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E7%94%BB%E5%BE%AA%E7%8E%AF"><span class="toc-text">动画循环</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1%EF%BC%89%E5%8D%95%E5%8A%A8%E7%94%BB%E5%BE%AA%E7%8E%AF-loop"><span class="toc-text">1）单动画循环 loop( )</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2%EF%BC%89%E5%8A%A8%E7%94%BB%E9%98%9F%E5%88%97%E5%BE%AA%E7%8E%AF"><span class="toc-text">2）动画队列循环</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0"><span class="toc-text">参考文章</span></a></li></ol></div></div><div class="footer"><div class="p"> <span>© 2020 - 2021 </span><i class="fa fa-star"></i><span> 小可乐跟我走</span></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li><li><a href="/tags">标签</a></li><li><a href="/about">关于</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>React Native 动画</a></h3></div><div class="post-content"><p>本次只记录用到的 API。</p>
<h2 id="timing"><a href="#timing" class="headerlink" title="timing( )"></a>timing( )</h2><p>图片由小变大</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; js</span><br><span class="line">this.state &#x3D; &#123;</span><br><span class="line">      hair1AnimateOpacity: new Animated.Value(0),  &#x2F;&#x2F; 声明动画初始状态</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">this.sequenceAnimated &#x3D; Animated.timing(this.hair1AnimateOpacity, &#123;</span><br><span class="line">        toValue: 1, &#x2F;&#x2F;动画最终值</span><br><span class="line">        duration: 200, &#x2F;&#x2F;动画时长3000毫秒</span><br><span class="line">        easing: Easing.linear,</span><br><span class="line">      &#125;),</span><br><span class="line"> </span><br><span class="line">  &#x2F;&#x2F; react native</span><br><span class="line">  &lt;Animated.View</span><br><span class="line">          style&#x3D;&#123;&#123;</span><br><span class="line">            width: 126,</span><br><span class="line">            height: 126,</span><br><span class="line">            transform: [&#123; scale: this.state.hair1AnimateOpacity &#125;],</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;Image</span><br><span class="line">            ref&#x3D;&quot;image&quot;</span><br><span class="line">            style&#x3D;&#123;&#123;</span><br><span class="line">              width: 126,</span><br><span class="line">              height: 126,</span><br><span class="line">            &#125;&#125;</span><br><span class="line">            source&#x3D;&#123;require(&#39;..&#x2F;..&#x2F;assets&#x2F;image&#x2F;hair1.png&#39;)&#125;</span><br><span class="line">          &gt;&lt;&#x2F;Image&gt;</span><br><span class="line">  &lt;&#x2F;Animated.View&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="spring（）"><a href="#spring（）" class="headerlink" title="spring（）"></a>spring（）</h2><p>根据基于<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Harmonic_oscillator#Damped_harmonic_oscillator">阻尼谐振动 damped harmonic oscillation</a>的弹性模型生成一个动画值。它会在<code>toValue</code>值更新的同时跟踪当前的速度状态，以确保动画连贯。可以链式调用。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> &#x2F;&#x2F; js</span><br><span class="line">this.state &#x3D; &#123;</span><br><span class="line">      hair1AnimateOpacity: new Animated.Value(0),  &#x2F;&#x2F; 声明动画初始状态</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line"> Animated.spring(this.state.hair1AnimateOpacity, &#123;</span><br><span class="line">        toValue: 1,</span><br><span class="line">        friction: 3, &#x2F;&#x2F;弹跳系数</span><br><span class="line">        tension: 10, &#x2F;&#x2F; 控制速度</span><br><span class="line">      &#125;),</span><br><span class="line">   </span><br><span class="line">    &#x2F;&#x2F; react native</span><br><span class="line">  &lt;Animated.View</span><br><span class="line">          style&#x3D;&#123;&#123;</span><br><span class="line">            width: 126,</span><br><span class="line">            height: 126,</span><br><span class="line">            transform: [&#123; scale: this.state.hair1AnimateOpacity &#125;],</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;Image</span><br><span class="line">            ref&#x3D;&quot;image&quot;</span><br><span class="line">            style&#x3D;&#123;&#123;</span><br><span class="line">              width: 126,</span><br><span class="line">              height: 126,</span><br><span class="line">            &#125;&#125;</span><br><span class="line">            source&#x3D;&#123;require(&#39;..&#x2F;..&#x2F;assets&#x2F;image&#x2F;hair1.png&#39;)&#125;</span><br><span class="line">          &gt;&lt;&#x2F;Image&gt;</span><br><span class="line">  &lt;&#x2F;Animated.View&gt;</span><br></pre></td></tr></table></figure>

<h2 id="sequence"><a href="#sequence" class="headerlink" title="sequence()"></a>sequence()</h2><p>按顺序执行一个动画数组里的动画，等待一个完成后再执行下一个。如果当前的动画被中止，后面的动画则不会继续执行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br></pre></td><td class="code"><pre><span class="line">import React from &#39;react&#39;</span><br><span class="line">import &#123;</span><br><span class="line">  Image,</span><br><span class="line">  View,</span><br><span class="line">  StyleSheet,</span><br><span class="line">  Text,</span><br><span class="line">  Animated,</span><br><span class="line">  TouchableOpacity,</span><br><span class="line">  Easing,</span><br><span class="line">&#125; from &#39;@mrn&#x2F;react-native&#39;</span><br><span class="line"></span><br><span class="line">export interface OpacityProps &#123;</span><br><span class="line">  isLoading: boolean</span><br><span class="line">&#125;</span><br><span class="line">export interface OpacityStates &#123;</span><br><span class="line">  hair1AnimateOpacity: any</span><br><span class="line">  hair2AnimateOpacity: any</span><br><span class="line">  hair3AnimateOpacity: any</span><br><span class="line">  hair4AnimateOpacity: any</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default class LoadAnimation extends React.Component&lt;</span><br><span class="line">  OpacityProps,</span><br><span class="line">  OpacityStates</span><br><span class="line">&gt; &#123;</span><br><span class="line">  sequenceAnimated: Animated.CompositeAnimation</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props)</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F; 声明动画初始值</span><br><span class="line">    this.state &#x3D; &#123;</span><br><span class="line">      hair1AnimateOpacity: new Animated.Value(0),</span><br><span class="line">      hair2AnimateOpacity: new Animated.Value(0),</span><br><span class="line">      hair3AnimateOpacity: new Animated.Value(0),</span><br><span class="line">      hair4AnimateOpacity: new Animated.Value(0),</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    &#x2F;&#x2F; 动画队列，会依次执行动画</span><br><span class="line">    this.sequenceAnimated &#x3D; Animated.sequence([</span><br><span class="line">      Animated.spring(this.state.hair1AnimateOpacity, &#123;</span><br><span class="line">        toValue: 1,</span><br><span class="line">        friction: 3, &#x2F;&#x2F;弹跳系数</span><br><span class="line">        tension: 10, &#x2F;&#x2F; 控制速度</span><br><span class="line">      &#125;),</span><br><span class="line">      Animated.timing(this.state.hair1AnimateOpacity, &#123;</span><br><span class="line">        toValue: 0, &#x2F;&#x2F;透明度动画最终值</span><br><span class="line">        duration: 200, &#x2F;&#x2F;动画时长3000毫秒</span><br><span class="line">        easing: Easing.linear,</span><br><span class="line">      &#125;),</span><br><span class="line">      Animated.spring(this.state.hair2AnimateOpacity, &#123;</span><br><span class="line">        toValue: 1,</span><br><span class="line">        friction: 3, &#x2F;&#x2F;弹跳系数</span><br><span class="line">        tension: 10, &#x2F;&#x2F; 控制速度</span><br><span class="line">      &#125;),</span><br><span class="line">      Animated.timing(this.state.hair2AnimateOpacity, &#123;</span><br><span class="line">        toValue: 0, &#x2F;&#x2F;透明度动画最终值</span><br><span class="line">        duration: 200, &#x2F;&#x2F;动画时长3000毫秒</span><br><span class="line">        easing: Easing.linear,</span><br><span class="line">      &#125;),</span><br><span class="line">      Animated.spring(this.state.hair3AnimateOpacity, &#123;</span><br><span class="line">        toValue: 1,</span><br><span class="line">        friction: 3, &#x2F;&#x2F;弹跳系数</span><br><span class="line">        tension: 10, &#x2F;&#x2F; 控制速度</span><br><span class="line">      &#125;),</span><br><span class="line">      Animated.timing(this.state.hair3AnimateOpacity, &#123;</span><br><span class="line">        toValue: 0, &#x2F;&#x2F;透明度动画最终值</span><br><span class="line">        duration: 200, &#x2F;&#x2F;动画时长3000毫秒</span><br><span class="line">        easing: Easing.linear,</span><br><span class="line">      &#125;),</span><br><span class="line">      Animated.spring(this.state.hair4AnimateOpacity, &#123;</span><br><span class="line">        toValue: 1,</span><br><span class="line">        friction: 3, &#x2F;&#x2F;弹跳系数</span><br><span class="line">        tension: 10, &#x2F;&#x2F; 控制速度</span><br><span class="line">      &#125;),</span><br><span class="line">      Animated.timing(this.state.hair4AnimateOpacity, &#123;</span><br><span class="line">        toValue: 0, &#x2F;&#x2F;透明度动画最终值</span><br><span class="line">        duration: 200, &#x2F;&#x2F;动画时长3000毫秒</span><br><span class="line">        easing: Easing.linear,</span><br><span class="line">      &#125;),</span><br><span class="line">    ])</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  &#x2F;&#x2F; 调用动画</span><br><span class="line">  _startAnimated() &#123;</span><br><span class="line">   this.sequenceAnimated.start()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;View style&#x3D;&#123;styles.mainStyle&#125;&gt;</span><br><span class="line">        &lt;Animated.View</span><br><span class="line">          style&#x3D;&#123;&#123;</span><br><span class="line">            width: 126,</span><br><span class="line">            height: 126,</span><br><span class="line">            transform: [&#123; scale: this.state.hair1AnimateOpacity &#125;],</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;Image</span><br><span class="line">            ref&#x3D;&quot;image&quot;</span><br><span class="line">            style&#x3D;&#123;&#123;</span><br><span class="line">              width: 126,</span><br><span class="line">              height: 126,</span><br><span class="line">            &#125;&#125;</span><br><span class="line">            source&#x3D;&#123;require(&#39;..&#x2F;..&#x2F;assets&#x2F;image&#x2F;hair1.png&#39;)&#125;</span><br><span class="line">          &gt;&lt;&#x2F;Image&gt;</span><br><span class="line">        &lt;&#x2F;Animated.View&gt;</span><br><span class="line">        &lt;Animated.View</span><br><span class="line">          style&#x3D;&#123;&#123;</span><br><span class="line">            position: &#39;absolute&#39;,</span><br><span class="line">            width: 126,</span><br><span class="line">            height: 126,</span><br><span class="line">            transform: [&#123; scale: this.state.hair2AnimateOpacity &#125;],</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;Image</span><br><span class="line">            ref&#x3D;&quot;image&quot;</span><br><span class="line">            style&#x3D;&#123;&#123;</span><br><span class="line">              width: 126,</span><br><span class="line">              height: 126,</span><br><span class="line">            &#125;&#125;</span><br><span class="line">            source&#x3D;&#123;require(&#39;..&#x2F;..&#x2F;assets&#x2F;image&#x2F;hair2.png&#39;)&#125;</span><br><span class="line">          &gt;&lt;&#x2F;Image&gt;</span><br><span class="line">        &lt;&#x2F;Animated.View&gt;</span><br><span class="line">        &lt;Animated.View</span><br><span class="line">          style&#x3D;&#123;&#123;</span><br><span class="line">            position: &#39;absolute&#39;,</span><br><span class="line">            width: 126,</span><br><span class="line">            height: 126,</span><br><span class="line">            transform: [&#123; scale: this.state.hair3AnimateOpacity &#125;],</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;Image</span><br><span class="line">            ref&#x3D;&quot;image&quot;</span><br><span class="line">            style&#x3D;&#123;&#123;</span><br><span class="line">              width: 126,</span><br><span class="line">              height: 126,</span><br><span class="line">            &#125;&#125;</span><br><span class="line">            source&#x3D;&#123;require(&#39;..&#x2F;..&#x2F;assets&#x2F;image&#x2F;hair3.png&#39;)&#125;</span><br><span class="line">          &gt;&lt;&#x2F;Image&gt;</span><br><span class="line">        &lt;&#x2F;Animated.View&gt;</span><br><span class="line">        &lt;Animated.View</span><br><span class="line">          style&#x3D;&#123;&#123;</span><br><span class="line">            position: &#39;absolute&#39;,</span><br><span class="line">            width: 126,</span><br><span class="line">            height: 126,</span><br><span class="line">            transform: [&#123; scale: this.state.hair4AnimateOpacity &#125;],</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;Image</span><br><span class="line">            ref&#x3D;&quot;image&quot;</span><br><span class="line">            style&#x3D;&#123;&#123;</span><br><span class="line">              width: 126,</span><br><span class="line">              height: 126,</span><br><span class="line">            &#125;&#125;</span><br><span class="line">            source&#x3D;&#123;require(&#39;..&#x2F;..&#x2F;assets&#x2F;image&#x2F;hair4.png&#39;)&#125;</span><br><span class="line">          &gt;&lt;&#x2F;Image&gt;</span><br><span class="line">        &lt;&#x2F;Animated.View&gt;</span><br><span class="line">        &lt;TouchableOpacity</span><br><span class="line">          style&#x3D;&#123;styles.touchStyle&#125;</span><br><span class="line">          onPress&#x3D;&#123;this._startAnimated.bind(this)&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;Text</span><br><span class="line">            style&#x3D;&#123;&#123;</span><br><span class="line">              width: 200,</span><br><span class="line">              height: 100,</span><br><span class="line">              textAlign: &#39;center&#39;,</span><br><span class="line">              lineHeight: 100,</span><br><span class="line">            &#125;&#125;</span><br><span class="line">          &gt;</span><br><span class="line">            点击开始动画</span><br><span class="line">          &lt;&#x2F;Text&gt;</span><br><span class="line">        &lt;&#x2F;TouchableOpacity&gt;</span><br><span class="line">      &lt;&#x2F;View&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="动画循环"><a href="#动画循环" class="headerlink" title="动画循环"></a>动画循环</h2><p>动画循环是最常用的一个场景，本次需求就要求对动画做一个循环效果。</p>
<p>查阅了<a target="_blank" rel="noopener" href="https://reactnative.cn/docs/animated#loop">官方文档</a> 和网上的一些资料，总结了两类实现动画循环的效果。</p>
<h4 id="1）单动画循环-loop"><a href="#1）单动画循环-loop" class="headerlink" title="1）单动画循环 loop( )"></a>1）单动画循环 loop( )</h4><p>这个不多说，可以直接看官方文档</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Animate.loop(</span><br><span class="line">  Animated.spring(this.state.hair1AnimateOpacity, &#123;</span><br><span class="line">          toValue: 1,</span><br><span class="line">          friction: 3, &#x2F;&#x2F;弹跳系数</span><br><span class="line">          tension: 10, &#x2F;&#x2F; 控制速度</span><br><span class="line">        &#125;)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h4 id="2）动画队列循环"><a href="#2）动画队列循环" class="headerlink" title="2）动画队列循环"></a>2）动画队列循环</h4><p>动画的 start( ) 方法可以传递回调函数，因此在动画结束时再次回调就可以很方便的实现动画循环了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">_startAnimated() &#123;</span><br><span class="line">  Animated.sequence(animations).start(() &#x3D;&gt; this._startAnimated())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后贴出完整代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br></pre></td><td class="code"><pre><span class="line">import React from &#39;react&#39;</span><br><span class="line">import &#123;</span><br><span class="line">  Image,</span><br><span class="line">  View,</span><br><span class="line">  StyleSheet,</span><br><span class="line">  Text,</span><br><span class="line">  Animated,</span><br><span class="line">  TouchableOpacity,</span><br><span class="line">  Easing,</span><br><span class="line">&#125; from &#39;@mrn&#x2F;react-native&#39;</span><br><span class="line"></span><br><span class="line">export interface OpacityProps &#123;</span><br><span class="line">  isLoading: boolean</span><br><span class="line">&#125;</span><br><span class="line">export interface OpacityStates &#123;</span><br><span class="line">  hair1AnimateOpacity: any</span><br><span class="line">  hair2AnimateOpacity: any</span><br><span class="line">  hair3AnimateOpacity: any</span><br><span class="line">  hair4AnimateOpacity: any</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default class LoadAnimation extends React.Component&lt;</span><br><span class="line">  OpacityProps,</span><br><span class="line">  OpacityStates</span><br><span class="line">&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F; hair1AnimateOpacity: Animated.Value</span><br><span class="line">  &#x2F;&#x2F; hair2AnimateOpacity: Animated.Value</span><br><span class="line">  &#x2F;&#x2F; hair3AnimateOpacity: Animated.Value</span><br><span class="line">  &#x2F;&#x2F; hair4AnimateOpacity: Animated.Value</span><br><span class="line">  sequenceAnimated: Animated.CompositeAnimation</span><br><span class="line">  constructor(props) &#123;</span><br><span class="line">    super(props)</span><br><span class="line">    </span><br><span class="line">    this.state &#x3D; &#123;</span><br><span class="line">      hair1AnimateOpacity: new Animated.Value(0),</span><br><span class="line">      hair2AnimateOpacity: new Animated.Value(0),</span><br><span class="line">      hair3AnimateOpacity: new Animated.Value(0),</span><br><span class="line">      hair4AnimateOpacity: new Animated.Value(0),</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  onSpringCompletion &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F; TODO</span><br><span class="line">    if (this.props.isLoading || 1) &#123;</span><br><span class="line">      this._startAnimated()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _startAnimated() &#123;</span><br><span class="line">    Animated.sequence([</span><br><span class="line">      Animated.spring(this.state.hair1AnimateOpacity, &#123;</span><br><span class="line">        toValue: 1,</span><br><span class="line">        friction: 3, &#x2F;&#x2F;弹跳系数</span><br><span class="line">        tension: 10, &#x2F;&#x2F; 控制速度</span><br><span class="line">      &#125;),</span><br><span class="line">      Animated.timing(this.state.hair1AnimateOpacity, &#123;</span><br><span class="line">        toValue: 0, &#x2F;&#x2F;透明度动画最终值</span><br><span class="line">        duration: 200, &#x2F;&#x2F;动画时长3000毫秒</span><br><span class="line">        easing: Easing.linear,</span><br><span class="line">      &#125;),</span><br><span class="line">      Animated.spring(this.state.hair2AnimateOpacity, &#123;</span><br><span class="line">        toValue: 1,</span><br><span class="line">        friction: 3, &#x2F;&#x2F;弹跳系数</span><br><span class="line">        tension: 10, &#x2F;&#x2F; 控制速度</span><br><span class="line">      &#125;),</span><br><span class="line">      Animated.timing(this.state.hair2AnimateOpacity, &#123;</span><br><span class="line">        toValue: 0, &#x2F;&#x2F;透明度动画最终值</span><br><span class="line">        duration: 200, &#x2F;&#x2F;动画时长3000毫秒</span><br><span class="line">        easing: Easing.linear,</span><br><span class="line">      &#125;),</span><br><span class="line">      Animated.spring(this.state.hair3AnimateOpacity, &#123;</span><br><span class="line">        toValue: 1,</span><br><span class="line">        friction: 3, &#x2F;&#x2F;弹跳系数</span><br><span class="line">        tension: 10, &#x2F;&#x2F; 控制速度</span><br><span class="line">      &#125;),</span><br><span class="line">      Animated.timing(this.state.hair3AnimateOpacity, &#123;</span><br><span class="line">        toValue: 0, &#x2F;&#x2F;透明度动画最终值</span><br><span class="line">        duration: 200, &#x2F;&#x2F;动画时长3000毫秒</span><br><span class="line">        easing: Easing.linear,</span><br><span class="line">      &#125;),</span><br><span class="line">      Animated.spring(this.state.hair4AnimateOpacity, &#123;</span><br><span class="line">        toValue: 1,</span><br><span class="line">        friction: 3, &#x2F;&#x2F;弹跳系数</span><br><span class="line">        tension: 10, &#x2F;&#x2F; 控制速度</span><br><span class="line">      &#125;),</span><br><span class="line">      Animated.timing(this.state.hair4AnimateOpacity, &#123;</span><br><span class="line">        toValue: 0, &#x2F;&#x2F;透明度动画最终值</span><br><span class="line">        duration: 200, &#x2F;&#x2F;动画时长3000毫秒</span><br><span class="line">        easing: Easing.linear,</span><br><span class="line">      &#125;),</span><br><span class="line">    ]).start(() &#x3D;&gt; this.onSpringCompletion())</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;View style&#x3D;&#123;styles.mainStyle&#125;&gt;</span><br><span class="line">        &lt;Animated.View</span><br><span class="line">          style&#x3D;&#123;&#123;</span><br><span class="line">            width: 126,</span><br><span class="line">            height: 126,</span><br><span class="line">            transform: [&#123; scale: this.state.hair1AnimateOpacity &#125;],</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;Image</span><br><span class="line">            ref&#x3D;&quot;image&quot;</span><br><span class="line">            style&#x3D;&#123;&#123;</span><br><span class="line">              width: 126,</span><br><span class="line">              height: 126,</span><br><span class="line">            &#125;&#125;</span><br><span class="line">            source&#x3D;&#123;require(&#39;..&#x2F;..&#x2F;assets&#x2F;image&#x2F;hair1.png&#39;)&#125;</span><br><span class="line">          &gt;&lt;&#x2F;Image&gt;</span><br><span class="line">        &lt;&#x2F;Animated.View&gt;</span><br><span class="line">        &lt;Animated.View</span><br><span class="line">          style&#x3D;&#123;&#123;</span><br><span class="line">            position: &#39;absolute&#39;,</span><br><span class="line">            width: 126,</span><br><span class="line">            height: 126,</span><br><span class="line">            transform: [&#123; scale: this.state.hair2AnimateOpacity &#125;],</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;Image</span><br><span class="line">            ref&#x3D;&quot;image&quot;</span><br><span class="line">            style&#x3D;&#123;&#123;</span><br><span class="line">              width: 126,</span><br><span class="line">              height: 126,</span><br><span class="line">            &#125;&#125;</span><br><span class="line">            source&#x3D;&#123;require(&#39;..&#x2F;..&#x2F;assets&#x2F;image&#x2F;hair2.png&#39;)&#125;</span><br><span class="line">          &gt;&lt;&#x2F;Image&gt;</span><br><span class="line">        &lt;&#x2F;Animated.View&gt;</span><br><span class="line">        &lt;Animated.View</span><br><span class="line">          style&#x3D;&#123;&#123;</span><br><span class="line">            position: &#39;absolute&#39;,</span><br><span class="line">            width: 126,</span><br><span class="line">            height: 126,</span><br><span class="line">            transform: [&#123; scale: this.state.hair3AnimateOpacity &#125;],</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;Image</span><br><span class="line">            ref&#x3D;&quot;image&quot;</span><br><span class="line">            style&#x3D;&#123;&#123;</span><br><span class="line">              width: 126,</span><br><span class="line">              height: 126,</span><br><span class="line">            &#125;&#125;</span><br><span class="line">            source&#x3D;&#123;require(&#39;..&#x2F;..&#x2F;assets&#x2F;image&#x2F;hair3.png&#39;)&#125;</span><br><span class="line">          &gt;&lt;&#x2F;Image&gt;</span><br><span class="line">        &lt;&#x2F;Animated.View&gt;</span><br><span class="line">        &lt;Animated.View</span><br><span class="line">          style&#x3D;&#123;&#123;</span><br><span class="line">            position: &#39;absolute&#39;,</span><br><span class="line">            width: 126,</span><br><span class="line">            height: 126,</span><br><span class="line">            transform: [&#123; scale: this.state.hair4AnimateOpacity &#125;],</span><br><span class="line">          &#125;&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;Image</span><br><span class="line">            ref&#x3D;&quot;image&quot;</span><br><span class="line">            style&#x3D;&#123;&#123;</span><br><span class="line">              width: 126,</span><br><span class="line">              height: 126,</span><br><span class="line">            &#125;&#125;</span><br><span class="line">            source&#x3D;&#123;require(&#39;..&#x2F;..&#x2F;assets&#x2F;image&#x2F;hair4.png&#39;)&#125;</span><br><span class="line">          &gt;&lt;&#x2F;Image&gt;</span><br><span class="line">        &lt;&#x2F;Animated.View&gt;</span><br><span class="line">        &lt;TouchableOpacity</span><br><span class="line">          style&#x3D;&#123;styles.touchStyle&#125;</span><br><span class="line">          onPress&#x3D;&#123;this._startAnimated.bind(this)&#125;</span><br><span class="line">        &gt;</span><br><span class="line">          &lt;Text</span><br><span class="line">            style&#x3D;&#123;&#123;</span><br><span class="line">              width: 200,</span><br><span class="line">              height: 100,</span><br><span class="line">              textAlign: &#39;center&#39;,</span><br><span class="line">              lineHeight: 100,</span><br><span class="line">            &#125;&#125;</span><br><span class="line">          &gt;</span><br><span class="line">            点击开始动画</span><br><span class="line">          &lt;&#x2F;Text&gt;</span><br><span class="line">        &lt;&#x2F;TouchableOpacity&gt;</span><br><span class="line">      &lt;&#x2F;View&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const styles &#x3D; StyleSheet.create(&#123;</span><br><span class="line">  mainStyle: &#123;&#125;,</span><br><span class="line">  touchStyle: &#123;&#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>​</p>
<h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/7fd37d8ed138">React Native 动画（Animated）</a></p>
<p><a target="_blank" rel="noopener" href="http://www.alloyteam.com/2016/01/reactnative-animated/">ReactNative Animated 动画详解</a></p>
<p><a target="_blank" rel="noopener" href="https://reactnative.cn/docs/animations#%E6%8F%92%E5%80%BC">官方文档-动画</a></p>
<p><a target="_blank" rel="noopener" href="https://reactnative.cn/docs/animated#sequence">官方文档—API</a></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2021-01-08</span><i class="fa fa-tag"></i><a class="tag" href="/categories/前端/" title="前端">前端 </a><a class="tag" href="/categories/前端/React-Native/" title="React Native">React Native </a><a class="tag" href="/tags/JS/" title="JS">JS </a><a class="tag" href="/tags/React-Native/" title="React Native">React Native </a><span class="leancloud_visitors"></span></div></div></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2021/01/08/FE/React%20Native/" title="React Native">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2021/01/08/FE/React%20Native%20scrollToView/" title="ScrollToView——将某元素滚动到指定位置">下一篇</a></li></ul></div><script src="/js/visitors.js"></script></div></div></div></div><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/add-bookmark.js"></script><script src="/js/baidu-tongji.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/Epsilon2.1.model.json"},"display":{"position":"left","width":200,"height":400,"hOffset":100,"vOffset":0},"mobile":{"show":false,"scale":0.2},"react":{"opacityDefault":0.8,"opacityOnHover":0.2},"log":false});</script></body></html>